<?php
// This file is part of Moodle - http://moodle.org/
//
// Moodle is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// Moodle is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.

/**
 * This plugin serves as a database and plan for all learning activities in the organization,
 * where such activities are organized for a more structured learning program.
 * @package    block_systemreports
 * @copyright  3i Logic<lms@3ilogic.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL
 * @author     Azmat Ullah <azmat@3ilogic.com>
 */
ob_start(); // put this at the top of all the code
require_once('../../config.php');
$setting = null;
$row = array();
require_once('systemreports_form.php');
require_once('lib.php');
require_once("{$CFG->libdir}/formslib.php");
global $DB, $USER, $OUTPUT, $PAGE, $CFG;

$viewpage = required_param('viewpage', PARAM_INT);
$rem = optional_param('rem', null, PARAM_RAW);
$edit = optional_param('edit', null, PARAM_RAW);
$delete = optional_param('delete', null, PARAM_RAW);
$id = optional_param('id', null, PARAM_INT);
$u_id = optional_param('id', null, PARAM_INT);
$lp = optional_param('lp', null, PARAM_INT);
$pageurl = new moodle_url('/blocks/systemreports/view.php', array('viewpage' => $viewpage));
$learningplan_url = new moodle_url('/blocks/systemreports/view.php?viewpage=1');
$nav_title = nav_title($viewpage);

require_login();
$context = context_system::instance();
if (!has_capability('block/systemreports:managepages', $context)) {
    redirect($CFG->wwwroot);
}
$PAGE->set_context($context);
$PAGE->set_url($pageurl);
$PAGE->set_pagelayout('standard');
$PAGE->set_heading(get_string('systemreports', 'block_systemreports'));
$PAGE->set_title(get_string('systemreports', 'block_systemreports'));
$PAGE->navbar->ignore_active();
$PAGE->navbar->add(get_string("pluginname", 'block_systemreports'), new moodle_url($learningplan_url));
$PAGE->navbar->add($nav_title);
echo $OUTPUT->header();
echo html_writer::start_tag('div class="report_table_design"');
$table = new html_table();
$table->head = array('<a href="' . $CFG->wwwroot . '/blocks/systemreports/view.php?viewpage=1">' . '<span class="report_icon"><svg height="64px" viewBox="0 0 512 512" width="64px" xmlns="http://www.w3.org/2000/svg"><path d="m508.792969 210.976562h-207.769531v-207.769531l18.726562 4.800781c44.242188 11.339844 84.796875 34.5 117.269531 66.976563 32.472657 32.472656 55.632813 73.023437 66.972657 117.269531zm-177.769531-30h138.222656c-11.171875-31.738281-29.417969-60.757812-53.441406-84.78125-24.023438-24.019531-53.042969-42.269531-84.78125-53.441406zm0 0"/><path d="m256 512c-68.378906 0-132.667969-26.628906-181.019531-74.980469-48.351563-48.351562-74.980469-112.640625-74.980469-181.019531s26.628906-132.667969 74.980469-181.019531c48.351562-48.351563 112.640625-74.980469 181.019531-74.980469h15l.023438 15v225.976562h240.976562v15c0 68.402344-26.628906 132.691407-74.980469 181.042969-48.351562 48.351563-112.640625 74.980469-181.019531 74.980469zm-14.976562-481.515625c-54.742188 3.5625-105.699219 26.578125-144.828126 65.710937-42.6875 42.683594-66.195312 99.4375-66.195312 159.804688s23.507812 117.121094 66.195312 159.804688c42.683594 42.6875 99.4375 66.195312 159.804688 66.195312s117.121094-23.507812 159.804688-66.195312c39.140624-39.136719 62.15625-90.097657 65.710937-144.828126h-240.492187zm0 0"/></svg></span>' . get_string('quater_wise_systemreports', 'block_systemreports') . '</a>',   
    '<a href="' . $CFG->wwwroot . '/blocks/systemreports/view.php?viewpage=4">'.'<span class="report_icon"><svg enable-background="new 0 0 512 512" height="64px" viewBox="0 0 512 512" width="64px"><path d="m137.85 164.712-21.09-3.056-9.428-19.043c-2.369-4.785-7.162-7.758-12.508-7.758-5.347 0-10.14 2.974-12.506 7.758l-9.428 19.043-21.093 3.057c-5.297.77-9.612 4.404-11.257 9.47-1.661 5.08-.311 10.558 3.533 14.306l15.248 14.814-3.599 20.918c-.894 5.194 1.29 10.549 5.563 13.639 2.398 1.735 5.23 2.652 8.19 2.652 2.239 0 4.476-.549 6.484-1.596l18.866-9.89 18.884 9.897c1.992 1.039 4.229 1.588 6.467 1.588 2.963 0 5.797-.918 8.187-2.65 4.277-3.092 6.461-8.447 5.566-13.641l-3.599-20.918 15.256-14.822c3.833-3.735 5.185-9.212 3.529-14.289-1.655-5.076-5.969-8.709-11.265-9.479zm-20.809 30.587c-1.775 1.724-2.585 4.212-2.165 6.65l3.905 22.698-20.476-10.732c-2.181-1.143-4.784-1.143-6.964 0l-20.474 10.732 3.905-22.699c.419-2.439-.391-4.927-2.166-6.65l-16.521-16.051 22.852-3.312c2.44-.354 4.551-1.885 5.646-4.095l10.241-20.684 10.241 20.684c1.094 2.21 3.205 3.74 5.646 4.095l22.852 3.312z"/><path d="m233.997 230.43h160.846c4.142 0 7.5-3.357 7.5-7.5s-3.358-7.5-7.5-7.5h-160.846c-4.142 0-7.5 3.357-7.5 7.5 0 4.142 3.358 7.5 7.5 7.5z"/><path d="m233.997 273.75h160.846c4.142 0 7.5-3.357 7.5-7.5s-3.358-7.5-7.5-7.5h-160.846c-4.142 0-7.5 3.357-7.5 7.5s3.358 7.5 7.5 7.5z"/><path d="m503.87 340.772c-1.782-3.739-6.256-5.327-9.997-3.545-3.74 1.781-5.327 6.257-3.545 9.996 4.427 9.292 6.672 19.259 6.672 29.624 0 38.345-31.503 69.541-70.226 69.541-38.724 0-70.228-31.196-70.228-69.541 0-38.342 31.504-69.535 70.228-69.535 16.006 0 31.08 5.192 43.592 15.015 3.258 2.558 7.973 1.99 10.531-1.268s1.99-7.973-1.268-10.53c-5.431-4.264-11.264-7.794-17.398-10.589v-141.69-64.178c0-9.649-7.85-17.5-17.5-17.5h-255.083v-8.461c0-9.649-7.851-17.5-17.5-17.5h-154.648c-9.649 0-17.5 7.851-17.5 17.5v285.178c0 5.493 2.341 9.881 6.422 12.039 4.081 2.156 9.025 1.621 13.565-1.474l12.877-8.775v.478 43.012c0 9.649 7.851 17.5 17.5 17.5h300.945c14.274 26.915 42.736 45.32 75.465 45.32 46.994 0 85.226-37.925 85.226-84.541 0-12.615-2.735-24.752-8.13-36.076zm-158.741 60.296h-294.765c-1.355 0-2.5-1.145-2.5-2.5v-53.711l42.919-29.249c2.001-1.363 6.08-1.362 8.08-.001l70.797 48.249c2.703 1.842 5.548 2.776 8.271 2.776 1.85 0 3.643-.432 5.294-1.305 4.081-2.158 6.422-6.546 6.422-12.039v-50.288c0-4.143-3.358-7.5-7.5-7.5s-7.5 3.357-7.5 7.5v46.103l-67.337-45.891c-7.119-4.85-17.856-4.85-24.974.002l-67.336 45.888v-280.991c0-1.355 1.145-2.5 2.5-2.5h154.648c1.355 0 2.5 1.145 2.5 2.5v198.889c0 4.143 3.358 7.5 7.5 7.5s7.5-3.357 7.5-7.5v-101.25h181.352c4.142 0 7.5-3.357 7.5-7.5s-3.358-7.5-7.5-7.5h-181.352v-59.178h255.084c1.355 0 2.5 1.144 2.5 2.5v56.678h-40.232c-4.142 0-7.5 3.357-7.5 7.5s3.358 7.5 7.5 7.5h40.231v129.002c-6.613-1.608-13.46-2.44-20.457-2.44-14.323 0-27.822 3.538-39.683 9.756h-153.094c-4.142 0-7.5 3.357-7.5 7.5s3.358 7.5 7.5 7.5h132.574c-15.452 15.31-25.024 36.456-25.024 59.779 0 8.417 1.263 16.544 3.582 24.221z"/><path d="m461.843 350.548-42.187 41.814-22.282-22.084c-2.942-2.915-7.691-2.895-10.607.048-2.915 2.941-2.895 7.69.047 10.606l24.011 23.797c2.435 2.413 5.632 3.619 8.831 3.619 3.198 0 6.396-1.207 8.831-3.619l43.915-43.527c2.942-2.916 2.963-7.665.047-10.606-2.915-2.942-7.664-2.963-10.606-.048z"/></svg></span>'. get_string('enrol_cert_comp', 'block_systemreports') . '</a>',
//hiding attendance highest and lowest attendance rate
//    '<a href="' . $CFG->wwwroot . '/blocks/systemreports/view.php?viewpage=5">' .'<span class="report_icon"><svg width="64px" height="64px" x="0px" y="0px" viewBox="0 0 15.692 15.692" style="enable-background:new 0 0 15.692 15.692;" xml:space="preserve">
//<g>
//    <g>
//        <path  d="M2.996,5.11c0.037,0.223,0.123,0.364,0.208,0.453C3.406,6.909,4.531,8.158,5.56,8.158
//            c1.199,0,2.291-1.352,2.501-2.592c0.087-0.088,0.174-0.23,0.212-0.456c0.068-0.252,0.156-0.69,0.002-0.896
//            C8.267,4.204,8.258,4.193,8.25,4.185c0.145-0.529,0.328-1.623-0.327-2.368C7.865,1.743,7.497,1.304,6.712,1.072L6.337,0.943
//            C5.719,0.752,5.331,0.709,5.314,0.707c-0.028-0.002-0.057,0-0.084,0.007C5.209,0.72,5.135,0.74,5.078,0.732
//            c-0.148-0.021-0.37,0.055-0.409,0.07c-0.051,0.021-1.248,0.5-1.611,1.615c-0.034,0.09-0.179,0.564,0.014,1.726
//            c-0.029,0.02-0.055,0.044-0.077,0.073C2.839,4.42,2.927,4.858,2.996,5.11z"/>
//        <path  d="M7.784,13.594c-0.221-0.124-0.461-0.243-0.717-0.356c-0.124-0.055-0.25-0.107-0.375-0.156
//            c-0.098-0.037-0.214-0.085-0.295-0.106l-1.186-0.32L7.43,8.138l0.951,0.6C8.582,8.864,8.73,8.971,8.892,9.09l0.034,0.025
//            C9.087,9.234,9.245,9.356,9.4,9.482c0.337,0.272,0.635,0.538,0.912,0.813c0.021,0.021,0.041,0.04,0.062,0.061
//            c0.093-0.103,0.184-0.195,0.275-0.294c-0.116-0.345-0.257-0.664-0.429-0.92c0,0-0.244-0.333-0.823-0.555
//            c0,0-0.049-0.015-0.124-0.04C8.758,8.306,8.269,8.151,8.269,8.151C8.164,8.113,8.072,8.076,7.989,8.04
//            c-0.35-0.173-0.641-0.368-0.701-0.552c0,0,0.202,1.955-1.507,2.001L5.543,9.478C3.994,9.34,3.891,7.484,3.891,7.484
//            c-0.162,0.509-2.11,1.101-2.11,1.101C1.202,8.807,0.957,9.141,0.957,9.141C0.101,10.411,0,13.237,0,13.237
//            c0.011,0.646,0.29,0.713,0.29,0.713c1.969,0.879,5.058,1.034,5.058,1.034c0.167,0.004,0.322-0.005,0.477-0.014l0.004,0.016
//            c0,0,1.508-0.077,3.089-0.423L8.725,14.31C8.568,14.103,8.217,13.836,7.784,13.594z"/>
//        <path  d="M7.222,7.571c0.021-0.027,0.044-0.054,0.066-0.084C7.283,7.469,7.282,7.46,7.282,7.46
//            C7.263,7.499,7.241,7.532,7.222,7.571z"/>
//        <path  d="M3.9,7.481L3.895,7.46L3.891,7.482C3.892,7.478,3.896,7.474,3.897,7.47
//            C3.898,7.471,3.899,7.475,3.9,7.481z"/>
//        <path  d="M13.882,8.388c-0.561,0.396-1.084,0.844-1.582,1.315c-0.499,0.474-0.972,0.973-1.427,1.488
//            c-0.169,0.192-0.333,0.386-0.496,0.581c-0.002-0.003-0.004-0.006-0.005-0.009c-0.24-0.32-0.5-0.605-0.77-0.872
//            c-0.27-0.266-0.55-0.512-0.838-0.746c-0.145-0.116-0.291-0.23-0.44-0.342C8.169,9.691,8.033,9.59,7.843,9.47l-1.182,2.405
//            c0.108,0.029,0.265,0.09,0.398,0.142c0.141,0.054,0.279,0.112,0.417,0.173c0.276,0.122,0.545,0.255,0.802,0.398
//            c0.508,0.284,0.981,0.63,1.251,0.983l0.909,1.192l0.523-1.134c0.263-0.568,0.578-1.162,0.901-1.728
//            c0.326-0.57,0.674-1.129,1.051-1.668s0.781-1.06,1.233-1.54c0.452-0.477,0.951-0.921,1.546-1.236
//            C15.046,7.649,14.442,7.996,13.882,8.388z"/>
//    </g>
//</g>
//</svg>
//</span>'. get_string('user_high_low_att', 'block_systemreports') . '</a>',
     '<a href="' . $CFG->wwwroot . '/blocks/systemreports/view.php?viewpage=6">' .'<span class="report_icon"><svg width="64px" height="64px" x="0px" y="0px"
     viewBox="0 0 318.188 318.188" style="enable-background:new 0 0 318.188 318.188;" xml:space="preserve">
<g>
    <g>
        <g>
            <path d="M121.315,189.909h77.471c9.581,0,17.42-7.839,17.42-17.421v-50.081c0-9.581-7.839-17.422-17.42-17.422h-48.632
                c-9.581,0-17.421,7.841-17.421,17.422v20.321c0,9.58,7.84,17.42,17.421,17.42h3.629c6.533,0,33.389,5.082,33.389-11.976
                c0-17.053-38.275-0.398-38.306-18.51c1.106-7.259,8.506-10.159,15.805-10.159h19.598c9.581,0,17.42,7.84,17.42,17.42v21.047
                c0,9.582-7.839,17.421-17.42,17.421h-48.438c-9.581,0-17.42-7.839-17.42-17.421v-49.84c0-9.583,7.839-17.421,17.42-17.421h55.696
                c9.581,0,17.42-3.266,17.42-7.258s-7.839-7.26-17.42-7.26h-70.212c-9.582,0-17.42,7.838-17.42,17.422v78.875
                C103.895,182.07,111.733,189.909,121.315,189.909z"/>
            <polygon points="170.279,133.315 166.785,126.01 157.577,129.662             "/>
            <polygon points="238.193,233.393 223.393,233.393 223.393,233.392 215.057,248.226 206.393,233.392 192.019,233.392 
                206.984,256.825 191.067,281.372 205.737,281.372 214.992,266.374 224.345,281.372 239.343,281.372 222.999,257.842             "/>
            <path d="M109.877,267.457h-0.263l-10.009-34.065H82.342v47.979h11.486v-20.84c0-3.259-0.23-7.832-0.689-13.717h0.295
                l9.813,34.557h12.339l9.681-34.491h0.295c-0.262,5.207-0.41,8.478-0.443,9.812c-0.033,1.335-0.049,2.549-0.049,3.643v21.036
                h11.913v-47.979h-17.295L109.877,267.457z"/>
            <path d="M283.149,52.723L232.624,2.197C231.218,0.79,229.311,0,227.321,0H40.342c-4.142,0-7.5,3.358-7.5,7.5v303.188
                c0,4.142,3.358,7.5,7.5,7.5h237.504c4.142,0,7.5-3.358,7.5-7.5V58.025C285.346,56.036,284.556,54.129,283.149,52.723z
                 M234.821,25.606l24.918,24.919h-24.918V25.606z M47.842,15h171.979v10.263H47.842V15z M47.842,303.188V40.263h171.979v17.763
                c0,4.143,3.358,7.5,7.5,7.5h43.024v237.662H47.842z"/>
            <path d="M157.79,233.195l-15.654,48.176h14.244l2.428-8.992h15.588l2.363,8.992h14.178l-15.852-48.176H157.79z M161.499,261.746
                c1.99-7.525,3.275-12.568,3.855-15.129c0.58-2.559,0.969-4.397,1.166-5.514c0.217,1.204,0.672,3.195,1.361,5.973
                c0.689,2.779,1.273,5.043,1.756,6.794l2.066,7.876H161.499z"/>
        </g>
    </g>
</g>
</svg></span>'. get_string('user_max_cert', 'block_systemreports') . '</a>',
    // '<a href="' . $CFG->wwwroot . '/blocks/systemreports/view.php?viewpage=8">' . get_string('send_notification', 'block_systemreports') . '</a>',
     '<a href="' . $CFG->wwwroot . '/blocks/systemreports/view.php?viewpage=7">' .'<span class="report_icon"><svg x="0px" y="0px"
     width="64px" height="64px" viewBox="0 0 232.046 232.046" style="enable-background:new 0 0 232.046 232.046;"
     xml:space="preserve">
<g>
    <g>
        <path d="M54.06,87.145c6.567,0,11.898-7.62,11.898-14.193c0-6.57-5.331-11.901-11.898-11.901c-6.573,0-11.898,5.325-11.898,11.901
            C42.162,79.53,47.487,87.145,54.06,87.145z"/>
        <path d="M48.403,179.331l3.379-42.088c0.7,0.311,1.473,0.487,2.277,0.487c0.81,0,1.577-0.177,2.283-0.487l3.386,42.088
            c0.234,2.966,2.709,5.194,5.617,5.194c0.161,0,0.311-0.006,0.459-0.019c3.118-0.243,5.432-2.965,5.176-6.082l-3.742-46.57v-32.12
            c0.463,0.137,0.904,0.262,1.303,0.38l3.431,30.863c0.262,2.411,2.308,4.184,4.665,4.184c0.18,0,0.356-0.006,0.523-0.024
            c2.588-0.286,4.445-2.618,4.159-5.2l-3.76-33.89c-0.024-0.225-0.143-0.404-0.207-0.624c-0.085-0.341-0.162-0.679-0.323-0.995
            c-0.131-0.25-0.308-0.427-0.463-0.637c-0.21-0.28-0.405-0.554-0.673-0.785c-0.213-0.183-0.469-0.286-0.697-0.417
            c-0.243-0.146-0.438-0.338-0.718-0.438c-0.423-0.155-9.895-3.547-18.6-3.995l-1.19,2.393h-0.03l3.167,24.683l-3.766,6.576
            l-3.766-6.576l3.166-24.683h-0.036l-1.197-2.393c-8.698,0.448-18.17,3.839-18.587,3.995c-0.28,0.101-0.487,0.292-0.725,0.444
            c-0.237,0.131-0.493,0.237-0.691,0.411c-0.28,0.243-0.481,0.523-0.7,0.815c-0.143,0.195-0.311,0.375-0.429,0.6
            c-0.167,0.323-0.237,0.673-0.335,1.029c-0.058,0.204-0.177,0.378-0.201,0.603l-3.766,33.889c-0.28,2.582,1.571,4.914,4.159,5.2
            c0.173,0.019,0.35,0.024,0.523,0.024c2.363,0,4.403-1.778,4.67-4.184l3.422-30.862c0.408-0.119,0.849-0.244,1.309-0.381v32.126
            l-3.745,46.57c-0.255,3.105,2.064,5.834,5.173,6.077c0.158,0.006,0.308,0.019,0.463,0.019
            C45.693,184.525,48.163,182.297,48.403,179.331z"/>
        <path d="M116.026,56.617c6.573,0,11.901-7.615,11.901-14.185c0-6.573-5.328-11.904-11.901-11.904s-11.904,5.331-11.904,11.904
            C104.122,48.996,109.453,56.617,116.026,56.617z"/>
        <path d="M110.357,148.807l3.392-42.091c0.7,0.308,1.467,0.487,2.277,0.487c0.807,0,1.574-0.18,2.28-0.487l3.386,42.091
            c0.237,2.953,2.716,5.2,5.62,5.2c0.152,0,0.305-0.012,0.457-0.024c3.117-0.256,5.431-2.978,5.188-6.077l-3.751-46.576V69.212
            c0.463,0.131,0.901,0.262,1.303,0.386l3.435,30.857c0.269,2.408,2.302,4.189,4.677,4.189c0.17,0,0.347-0.006,0.512-0.024
            c2.594-0.293,4.444-2.619,4.165-5.2l-3.77-33.883c-0.024-0.229-0.14-0.411-0.201-0.625c-0.085-0.347-0.158-0.691-0.322-1.008
            c-0.128-0.237-0.305-0.417-0.463-0.63c-0.213-0.28-0.408-0.554-0.676-0.785c-0.207-0.177-0.457-0.28-0.7-0.424
            c-0.238-0.143-0.445-0.332-0.719-0.432c-0.42-0.162-9.889-3.547-18.59-4.003l-1.206,2.39h-0.024l3.166,24.68l-3.766,6.579
            L112.26,84.7l3.173-24.68h-0.037l-1.196-2.396c-8.698,0.45-18.164,3.842-18.587,4.003c-0.28,0.101-0.487,0.29-0.725,0.438
            c-0.237,0.131-0.484,0.241-0.691,0.411c-0.28,0.237-0.481,0.524-0.691,0.81c-0.152,0.207-0.32,0.38-0.438,0.606
            c-0.167,0.316-0.244,0.667-0.335,1.02c-0.058,0.213-0.17,0.39-0.195,0.618l-3.766,33.883c-0.286,2.588,1.577,4.914,4.159,5.2
            c0.183,0.018,0.35,0.024,0.53,0.024c2.362,0,4.408-1.781,4.67-4.189l3.425-30.86c0.405-0.122,0.847-0.253,1.309-0.384v32.117
            l-3.742,46.576c-0.255,3.105,2.064,5.827,5.176,6.07c0.149,0.013,0.298,0.025,0.454,0.025
            C107.653,154.007,110.129,151.76,110.357,148.807z"/>
        <path d="M177.986,26.089c6.57,0,11.898-7.614,11.898-14.188c0-6.57-5.328-11.901-11.898-11.901c-6.582,0-11.91,5.325-11.91,11.901
            C166.076,18.48,171.404,26.089,177.986,26.089z"/>
        <path d="M172.317,118.275l3.392-42.094c0.7,0.313,1.468,0.493,2.277,0.493c0.804,0,1.577-0.174,2.271-0.493l3.392,42.094
            c0.237,2.96,2.703,5.194,5.608,5.194c0.158,0,0.304-0.006,0.462-0.012c3.112-0.256,5.432-2.979,5.176-6.084l-3.75-46.572V38.685
            c0.475,0.131,0.913,0.262,1.314,0.38l3.423,30.863c0.268,2.402,2.313,4.184,4.676,4.184c0.183,0,0.348-0.006,0.524-0.024
            c2.588-0.292,4.438-2.619,4.158-5.194l-3.769-33.883c-0.024-0.231-0.146-0.411-0.207-0.627c-0.086-0.344-0.152-0.688-0.317-0.999
            c-0.134-0.244-0.304-0.426-0.475-0.63c-0.201-0.28-0.396-0.554-0.664-0.786c-0.207-0.18-0.463-0.286-0.7-0.423
            c-0.243-0.146-0.438-0.338-0.718-0.433c-0.427-0.161-9.89-3.553-18.597-4l-1.206,2.393h-0.024l3.167,24.68l-3.764,6.579
            l-3.763-6.579l3.166-24.68h-0.036l-1.193-2.393c-8.708,0.448-18.177,3.839-18.597,4c-0.28,0.101-0.475,0.286-0.719,0.438
            c-0.243,0.137-0.486,0.244-0.682,0.411c-0.286,0.244-0.487,0.53-0.7,0.81c-0.152,0.201-0.316,0.381-0.444,0.612
            c-0.165,0.311-0.244,0.661-0.329,1.017c-0.055,0.21-0.17,0.393-0.207,0.609l-3.757,33.883c-0.286,2.576,1.571,4.908,4.159,5.194
            c0.17,0.018,0.341,0.024,0.523,0.024c2.356,0,4.402-1.781,4.67-4.184l3.429-30.863c0.401-0.113,0.84-0.244,1.303-0.38v32.117
            l-3.738,46.572c-0.256,3.118,2.058,5.828,5.176,6.084c0.158,0.006,0.298,0.012,0.463,0.012
            C169.614,123.47,172.086,121.235,172.317,118.275z"/>
        <path d="M189.27,123.47h-22.566h-19.704v30.525h-19.687h-22.579H85.042v30.524H65.346H42.78H23.084v47.526h61.957h61.958h61.963
            V123.47H189.27z M55.923,221.499v4.226h-4.059v-3.934c-2.773-0.128-5.474-0.876-7.045-1.79l1.246-4.841
            c1.735,0.944,4.186,1.821,6.877,1.821c2.366,0,3.979-0.914,3.979-2.57c0-1.577-1.321-2.569-4.391-3.604
            c-4.433-1.498-7.456-3.568-7.456-7.587c0-3.647,2.563-6.504,7.003-7.381v-3.934h4.064v3.642c2.768,0.128,4.646,0.706,6.004,1.37
            l-1.203,4.683c-1.078-0.456-2.987-1.413-5.967-1.413c-2.701,0-3.56,1.164-3.56,2.326c0,1.364,1.446,2.235,4.975,3.562
            c4.932,1.741,6.92,4.025,6.92,7.752C63.306,217.511,60.694,220.671,55.923,221.499z M117.893,207.104v4.226h-4.062v-3.939
            c-2.773-0.128-5.474-0.871-7.045-1.784l1.239-4.848c1.742,0.95,4.186,1.827,6.877,1.827c2.369,0,3.977-0.913,3.977-2.569
            c0-1.583-1.315-2.576-4.388-3.611c-4.433-1.491-7.456-3.562-7.456-7.58c0-3.654,2.563-6.516,7.002-7.381v-3.934h4.062v3.647
            c2.776,0.128,4.652,0.706,6.016,1.37l-1.199,4.677c-1.084-0.45-2.989-1.413-5.974-1.413c-2.7,0-3.564,1.17-3.564,2.32
            c0,1.37,1.452,2.234,4.978,3.562c4.92,1.753,6.917,4.03,6.917,7.757C125.272,203.122,122.654,206.276,117.893,207.104z
             M179.855,192.71v4.237h-4.055v-3.939c-2.783-0.128-5.48-0.87-7.052-1.784l1.248-4.847c1.742,0.943,4.184,1.814,6.875,1.814
            c2.369,0,3.982-0.913,3.982-2.569c0-1.584-1.321-2.57-4.391-3.605c-4.438-1.498-7.459-3.562-7.459-7.587
            c0-3.642,2.558-6.503,7.003-7.38v-3.945h4.062v3.659c2.771,0.116,4.646,0.7,6.01,1.364l-1.193,4.682
            c-1.084-0.462-2.99-1.412-5.968-1.412c-2.703,0-3.568,1.157-3.568,2.314c0,1.369,1.449,2.24,4.981,3.567
            c4.932,1.741,6.917,4.019,6.917,7.752C187.235,188.739,184.617,191.894,179.855,192.71z"/>
    </g>
</g>
</svg></svg></span>'. get_string('hla', 'block_systemreports') . '</a>');
    
$table->size = array();
$table->align = array('center', 'center', 'center', 'center', 'center', 'center');
$table->width = '100%';
$table->data[] = $row;
echo html_writer::table($table);
if ($viewpage == 1) { // quater wise learning
    $form = new learningplan_form();
}else if ($viewpage == 4) { // Enrollment vs certificaton
    $form = new assigntraining_learningplan__form();
} else if ($viewpage == 5) { 
    $form = new assignlerningplan_user_form();
} else if ($viewpage == 6) { // user max number of certification
    $form = new trainingstatus_form();
} else if ($viewpage == 7) { //Highest in lowest in assessment
    $form = new highest_lowest_grade();
}
// Set viewpage with form.
if ($viewpage != 8) {
    $toform['viewpage'] = $viewpage;
    $form->set_data($toform);

// Display List.
    if ($table = $form->display_list()) {
        echo html_writer::table($table);
    }
}
echo html_writer::end_tag('div');
?>
    <!-- DataTables code starts-->
<link rel="stylesheet" type="text/css" href="<?php echo $CFG->wwwroot ?>/blocks/systemreports/public/datatable/jquery.dataTables.css">
<link rel="stylesheet" type="text/css" href="<?php echo $CFG->wwwroot ?>/blocks/systemreports/public/datatable/dataTables.tableTools.css">
<script type="text/javascript" language="javascript" src="<?php echo $CFG->wwwroot ?>/blocks/systemreports/public/datatable/jquery.js"></script>
<script type="text/javascript" language="javascript" src="<?php echo $CFG->wwwroot ?>/blocks/systemreports/public/datatable/jquery.dataTables.js"></script>
<script type="text/javascript" language="javascript" src="<?php echo $CFG->wwwroot ?>/blocks/systemreports/public/datatable/dataTables.tableTools.js"></script>
<script type="text/javascript" language="javascript" class="init">
    $(document).ready(function () {
// fn for automatically adjusting table coulmns
        $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
            $($.fn.dataTable.tables(true)).DataTable()
                    .columns.adjust();
        });

        $('.display').DataTable({
            dom: 'T<"clear">lfrtip',
            tableTools: {
                "aButtons": [
                    "copy",
                    "print",
                    {
                        "sExtends": "collection",
                        "sButtonText": "Save",
                        "aButtons": ["xls", "pdf"]
                    }
                ],
                "sSwfPath": "<?php echo $CFG->wwwroot ?>/blocks/systemreports/public/datatable/copy_csv_xls_pdf.swf"
            }
        });

        $(function(){
            var current = window.location.href;
            $('.report_table_design table thead a').each(function(){
                // if the current path is like this link, make it active
                if($(this).attr('href').indexOf(current) !== -1){
                    $(this).parent().addClass('active');
                }
            })
        })
    });
</script>

<?php

$PAGE->requires->js_init_call('M.block_systemreports.init', array($viewpage, $setting));
echo $OUTPUT->footer();

// End Form Display.